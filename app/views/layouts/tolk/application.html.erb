<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="<%= Tolk::Locale.primary_locale_name %>" lang="<%= Tolk::Locale.primary_locale_name %>">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Tolk</title>

  <% if respond_to?(:sprockets_include_tag) %>
    <%= sprockets_include_tag %>
  <% else %>
    <%= javascript_include_tag :defaults %>
  <% end %>

  <%= stylesheet_link_tag "/tolk/reset", "/tolk/screen" %>
  <%= yield :head %>
</head>

<body>
  <div id="container">
    <div id="head">
      <h1><span class="home"><%= link_to "Tolk", tolk_root_path %></span><%= yield :locale %></h1>
      <% flash.each do |key, message| %>
        <span class="flash <%= key.to_s -%>"><%= message -%></span>
      <% end %>
    </div>
    <%= yield %>
  </div>

  <script type="text/javascript">
    $$('td textarea').each(function(element) {
      element.setStyle({height: element.up('td').measure('height')+'px'});
    });

    $$('a.copy-from-original').each(function(element) {
      element.observe('click', function(event) {
        var primary_translation = element.up().next('td.phrase').down('span.value').innerText;
        var translation_area = element.previous('textarea');
        translation_area.setValue(primary_translation);
        translation_area.focus();
        return false;
      });
    });
  </script>
</body>
</html>
